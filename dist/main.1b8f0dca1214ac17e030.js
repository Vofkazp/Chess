(()=>{"use strict";class t{constructor(t,o,i){this.figure=t,this.position=o,this.color=i,this.image=e[i][t],this.element=this.createElement()}changePosition(t,e){this.position={x:t,y:e},this.moveFigure(t,e)}createElement(){const t=document.querySelector("#app"),e=document.createElement("div");return e.classList.add("figure",this.color),e.style.cssText=`--indexX: ${this.position.x}; --indexY: ${this.position.y};`,e.setAttribute("data-x",this.position.x),e.setAttribute("data-y",this.position.y),e.innerHTML=this.image,t.appendChild(e),e}moveFigure(t,e){this.element.dataset.x=t,this.element.dataset.y=e,this.element.style.cssText=`--indexX: ${t}; --indexY: ${e};`}removeFigure(t,e){this.changePosition(t,e),setTimeout((()=>{this.element.remove(),this.figure=void 0,this.position=void 0,this.color=void 0,this.image=void 0}),500)}}const e={white:{R:"&#9814;",N:"&#9816;",B:"&#9815;",Q:"&#9813;",K:"&#9812;",P:"&#9817;"},black:{R:"&#9820;",N:"&#9822;",B:"&#9821;",Q:"&#9819;",K:"&#9818;",P:"&#9823;"}},o=[{type:"R",color:"black",x:0,y:0},{type:"N",color:"black",x:0,y:1},{type:"B",color:"black",x:0,y:2},{type:"Q",color:"black",x:0,y:3},{type:"K",color:"black",x:0,y:4},{type:"B",color:"black",x:0,y:5},{type:"N",color:"black",x:0,y:6},{type:"R",color:"black",x:0,y:7},{type:"P",color:"black",x:1,y:0},{type:"P",color:"black",x:1,y:1},{type:"P",color:"black",x:1,y:2},{type:"P",color:"black",x:1,y:3},{type:"P",color:"black",x:1,y:4},{type:"P",color:"black",x:1,y:5},{type:"P",color:"black",x:1,y:6},{type:"P",color:"black",x:1,y:7},{type:"P",color:"white",x:6,y:0},{type:"P",color:"white",x:6,y:1},{type:"P",color:"white",x:6,y:2},{type:"P",color:"white",x:6,y:3},{type:"P",color:"white",x:6,y:4},{type:"P",color:"white",x:6,y:5},{type:"P",color:"white",x:6,y:6},{type:"P",color:"white",x:6,y:7},{type:"R",color:"white",x:7,y:0},{type:"N",color:"white",x:7,y:1},{type:"B",color:"white",x:7,y:2},{type:"Q",color:"white",x:7,y:3},{type:"K",color:"white",x:7,y:4},{type:"B",color:"white",x:7,y:5},{type:"N",color:"white",x:7,y:6},{type:"R",color:"white",x:7,y:7}];function i(t,e,o,i){!function(t,e,o,i,c,l){c[t+o]&&0===c[t+o][e]&&(h(t,e,t+o,e,"ghost"),t===i&&0===c[t+2*o][e]&&h(t,e,t+2*o,e,"ghost")),function(t,e,o,i,c){i[t+o]&&e>0&&0!==i[t+o][e-1]&&i[t+o][e-1].color!==c&&h(t,e,t+o,e-1,"kill"),i[t+o]&&e<i[t+o].length-1&&0!==i[t+o][e+1]&&i[t+o][e+1].color!==c&&h(t,e,t+o,e+1,"kill")}(t,e,o,c,l)}(t,e,"black"===i?1:-1,"black"===i?1:6,o,i)}function c(t,e,o,i){[[1,0],[-1,0],[0,1],[0,-1]].forEach((c=>{let[l,r]=c;return a(t,e,l,r,o,i)}))}function l(t,e,o,i){[[1,1],[1,-1],[-1,1],[-1,-1]].forEach((c=>{let[l,r]=c;return a(t,e,l,r,o,i)}))}function r(t,e,o,i){[[1,0],[-1,0],[0,1],[0,-1],[1,1],[1,-1],[-1,1],[-1,-1]].forEach((c=>{let[l,r]=c;return y(t,e,l,r,o,i)}))}function s(t,e,o,i){[[1,0],[-1,0],[0,1],[0,-1],[1,1],[1,-1],[-1,1],[-1,-1]].forEach((c=>{let[l,r]=c;return a(t,e,l,r,o,i)}))}function n(t,e,o,i){[[2,1],[2,-1],[-2,1],[-2,-1],[1,2],[1,-2],[-1,2],[-1,-2]].forEach((c=>{let[l,r]=c;return y(t,e,l,r,o,i)}))}function a(t,e,o,i,c,l){let r=t+o,s=e+i;for(;r>=0&&r<c.length&&s>=0&&s<c[0].length;){if(0!==c[r][s]){c[r][s].color!==l&&h(t,e,r,s,"kill");break}h(t,e,r,s,"ghost"),r+=o,s+=i}}function y(t,e,o,i,c,l){const r=t+o,s=e+i;r>=0&&r<c.length&&s>=0&&s<c[0].length&&(0===c[r][s]?h(t,e,r,s,"ghost"):c[r][s].color!==l&&h(t,e,r,s,"kill"))}function h(t,e,o,i,c){const l="ghost"===c?{class:"ghost",symbol:"&#9675;"}:{class:"kill",symbol:"&#10006;"},r=document.querySelector("#app"),s=document.createElement("div");s.classList.add(l.class),s.style.cssText=`--indexX: ${o}; --indexY: ${i};`,s.setAttribute("data-old-x",t),s.setAttribute("data-old-y",e),s.setAttribute("data-x",o),s.setAttribute("data-y",i),s.innerHTML=l.symbol,r.appendChild(s)}let d="white";function u(){document.querySelectorAll(".figure").forEach((t=>t.classList.remove("active"))),document.querySelectorAll(".ghost, .kill").forEach((t=>t.remove()))}const x=new class{constructor(){this.board=Array.from({length:8},(()=>new Array(8).fill(0)))}getBoard(){return this.board}moveElement(t,e,o,i){this.board[o][i]=this.board[t][e],this.board[t][e]=0}},p=x.getBoard();!function(t){const e=document.querySelector("#app");for(let o=0;o<t.length;o++)for(let i=0;i<t[o].length;i++){const t=document.createElement("div");(o+i)%2==0?t.classList.add("cell","dark"):t.classList.add("cell"),e.appendChild(t)}}(p),function(e){o.forEach((o=>{e[o.x][o.y]=new t(o.type,{x:o.x,y:o.y},o.color)}))}(p),function(t){const e=document.querySelector(".container"),o=t.getBoard();e.addEventListener("click",(e=>{if(e.target.classList.contains("cell")&&u(),e.target.classList.contains("figure")){u();const{x:t,y:a}=e.target.dataset;o[t][a].color===d&&(e.target.classList.add("active"),function(t,e){const{x:o,y:a}=t.position,y=t.color;({P:i,R:c,B:l,K:r,Q:s,N:n})[t.figure](+o,+a,e,y)}(o[t][a],o))}if(e.target.classList.contains("ghost")||e.target.classList.contains("kill")){u();const{oldX:i,oldY:c,x:l,y:r}=e.target.dataset;e.target.classList.contains("kill")?(o[i][c].changePosition(l,r),setTimeout((()=>{o[l][r].removeFigure(-1,0),t.moveElement(i,c,l,r)}),500)):(o[i][c].changePosition(l,r),t.moveElement(i,c,l,r)),d="black"===d?"white":"black"}}))}(x)})();